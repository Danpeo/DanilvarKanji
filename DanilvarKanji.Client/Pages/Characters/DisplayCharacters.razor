@using DanilvarKanji.Shared.DTO
@using DanilvarKanji.Shared.Models
@using DanilvarKanji.Client.Extensions
@using DanilvarKanji.Shared.Models.Enums
@inject ILocalStorageService LocalStorage

@foreach (CharacterDto character in CharacterItems)
{
    <div class="col-md-3 mb-2">
        <a href="/@character.Id">
            <div class="card bg-main">
                <div class="card-body">
                    <h1 class="card-title display-1 mb-3 jap-font txt-mid-pink text-center">
                        @if (character.Definitions != null)
                        {
                            @GetCharacterDefinitionByCulture(character);
                        }
                    </h1>
                    <p class="card-text display-7 txt-light-pink main-font">
                        @if (_allKanjiMeanings != null && _allKanjiMeanings.ContainsKey(character.Id))
                        {
                            for (var i = 0; i < _allKanjiMeanings[character.Id].Count; i++)
                            {
                                string kanjiMeaning = _allKanjiMeanings[character.Id][i];
                                string resultMeaning = $"{char.ToUpper(kanjiMeaning[0])}{kanjiMeaning[1..]}";

                                @resultMeaning

                                if (i < _allKanjiMeanings[character.Id].Count - 1)
                                {
                                    <span>, </span>
                                }
                            }
                        }
                    </p>
                    @if (character.Kunyomis is {Count: > 0})
                    {
                        <p class="card-text txt-white">
                            <DisplayKunyomi Character="character"/>
                        </p>
                    }
                    else
                    {
                        <p class="card-text txt-white">-----</p>
                    }
                    @if (character.Onyomis is {Count: > 0 })
                    {
                        <p class="card-text txt-white">
                            <DisplayOnyomi Character="character"/>
                        </p>
                    }
                    else
                    {
                        <p class="card-text txt-white">-----</p>
                    }
                    <p class="card-text txt-gray">
                        JLPT @character.JlptLevel.GetDisplayName()
                    </p>
                </div>
            </div>
        </a>
    </div>
}